<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>æ•´æ•¸å››å‰‡é€²éšéŠæˆ²</title>
<style>
  body{font-family:system-ui,"Noto Sans TC";background:#f0f8ff;padding:20px;}
  .game-box{
    max-width:480px;margin:auto;background:white;padding:20px;
    border-radius:16px;box-shadow:0 0 12px #0002;
    border:4px solid #a5d8ff;position:relative;
  }
  h2{text-align:center;margin:0;font-size:26px;color:#1c6dd0;}
  .q{font-size:30px;text-align:center;margin:20px 0;color:#444;font-weight:700;}
  input{
    width:100%;padding:12px;font-size:22px;text-align:center;
    border-radius:10px;border:2px solid #87c9ff;
  }
  button{
    width:100%;padding:12px;margin-top:12px;font-size:18px;
    border-radius:10px;cursor:pointer;border:2px solid #87c9ff;background:#dff2ff;
  }
  button:disabled{opacity:0.5;cursor:not-allowed;}
  #result{margin-top:14px;font-size:22px;text-align:center;height:32px;}
  #score,#timer,#progress{text-align:center;font-size:18px;margin-top:8px;}
  .cute{font-size:40px;text-align:center;margin-top:10px;}
</style>
</head>
<body>
<div class="game-box">
  <h2>æ•´æ•¸å››å‰‡é€²éšä»»å‹™</h2>
  <div id="progress">é¡Œç›®ï¼š1 / 12</div>
  <div id="timer">æ™‚é–“ï¼š60 ç§’</div>
  <div class="q" id="question">é¡Œç›®è¼‰å…¥ä¸­...</div>
  <input id="answer" placeholder="è¼¸å…¥ç­”æ¡ˆ" />
  <button id="checkBtn">ç¢ºèªç­”æ¡ˆ</button>
  <div id="result"></div>
  <div id="score">å¾—åˆ†ï¼š0</div>
  <div class="cute" id="emoji">ğŸ¦Š</div>
</div>

<script>
  const EASY_OPS=['+','-'];
  const MID_OPS=['Ã—','Ã·'];
  let total=12, index=1;
  let score=0, correct; let timer=300; let countdown;

  function startTimer(){
    countdown=setInterval(()=>{
      timer--; document.getElementById('timer').textContent=`æ™‚é–“ï¼š${timer} ç§’`;
      if(timer<=0){finishGame();}
    },1000);
  }

  function randomQuestion(){
    let level;
    if(index<=6) level=1;
    else if(index<=9) level=2;
    else level=3;

    let a,b,op1,op2;
    if(level===1){
      op1=EASY_OPS[Math.floor(Math.random()*2)];
      a=Math.floor(Math.random()*90)+10;
      b=Math.floor(Math.random()*90)+10;
      correct=evalInt(a,op1,b);
      return `${a} ${op1} ${b}`;
    }
    if(level===2){
      op1=MID_OPS[Math.floor(Math.random()*2)];
      if(op1==='Ã—'){
        a=Math.floor(Math.random()*20)+2;
        b=Math.floor(Math.random()*20)+2;
        correct=a*b;
      } else {
        b=Math.floor(Math.random()*18)+2;
        correct=Math.floor(Math.random()*15)+2;
        a=b*correct;
      }
      return `${a} ${op1} ${b}`;
    }
    // Level 3: x Ã— y Ã· zï¼Œç¢ºä¿çµæœæ˜¯æ•´æ•¸
    let x=Math.floor(Math.random()*10)+2;
    let y=Math.floor(Math.random()*10)+2;
    let z=Math.floor(Math.random()*10)+2;
    let mid=x*y;
    // ç¢ºä¿ mid èƒ½è¢« z æ•´é™¤
    while(mid%z!==0){
      z=Math.floor(Math.random()*10)+2;
    }
    correct=mid/z;
    return `${x} Ã— ${y} Ã· ${z}`;
  }

  function evalInt(a,op,b){
    if(op==='+')return a+b;
    if(op==='-')return a-b;
    if(op==='Ã—')return a*b;
    if(op==='Ã·')return a/b;
  }

  function newQuestion(){
    if(index>total){finishGame();return;}
    document.getElementById('result').textContent='';
    document.getElementById('answer').value='';
    document.getElementById('progress').textContent=`é¡Œç›®ï¼š${index} / ${total}`;
    let q=randomQuestion();
    document.getElementById('question').textContent=q+' = ?';
  }

  function checkAnswer(){
    let ans=Number(document.getElementById('answer').value);
    if(isNaN(ans) || document.getElementById('answer').value.trim()===''){
      document.getElementById('result').textContent='âŒ è«‹è¼¸å…¥æ•¸å­—';
      return;
    }
    if(ans===correct){
      document.getElementById('result').textContent='âœ”ï¸ æ­£ç¢ºï¼';
      let timeBonus=Math.floor(timer/10); // æ™‚é–“çå‹µ
      score+=10+timeBonus;
      document.getElementById('emoji').textContent='ğŸ±âœ¨';
    } else {
      document.getElementById('result').textContent=`âŒ æ­£ç¢ºç­”æ¡ˆæ˜¯ ${correct}`;
      document.getElementById('emoji').textContent='ğŸ¶â“';
    }
    document.getElementById('score').textContent=`å¾—åˆ†ï¼š${score}`;
    index++;
    setTimeout(()=>{
      document.getElementById('emoji').textContent='ğŸ¦Š';
      newQuestion();
    },800);
  }

  function finishGame(){
    clearInterval(countdown);
    document.getElementById('question').textContent='éŠæˆ²çµæŸï¼';
    document.getElementById('result').textContent=`æœ€çµ‚å¾—åˆ†ï¼š${score}`;
    document.getElementById('emoji').textContent='ğŸ‰';
    document.getElementById('checkBtn').disabled=true;
    document.getElementById('answer').disabled=true;
  }

  // æŒ‰éˆ•é»æ“Šäº‹ä»¶
  document.getElementById('checkBtn').onclick=checkAnswer;
  
  // Enter éµæäº¤ç­”æ¡ˆ
  document.getElementById('answer').addEventListener('keypress', function(e){
    if(e.key==='Enter'){
      checkAnswer();
    }
  });

  startTimer();
  newQuestion();
</script>
</body>
</html>
